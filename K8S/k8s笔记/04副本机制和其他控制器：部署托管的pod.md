[toc]

## 1. 保持pod健康

使用RC或者DaemonSet控制器创建pod的好处:
当pod所在的工作节点失败后，pod容器可以在其他节点上重新被控制器创建，直接创建pod没有这个功能。


### 1.1 介绍存活探针
K8S可以通过存活探针(liveness probe) 检查容器是否还在运行。可以为pod中的每个容器单独指定存活探针。如果探测失败，k8s将定期执行探针并重新启动容器。

k8s由以下三种探测容器机制:
1. HTTP GET 探针对容器的IP地址(你指定的端口和路径)执行HTTP GET 请求。如果探测器收到响应，并且响应状态码不代表错误(HTTP返回的状态码是2xx或者是3xx)，则认为探测成功。如果服务器返回错误响应状态码或者根本没响应，那么探测认为是失败的，容器将被重新启动。
2. TCP套接字探针尝试与容器指定端口建立TCP连接，如果连接成功建立，则探测成功，否则失败，容器重新启动。
3. Exec 探针在容器内执行任意命令，并检查命令的退出状态码，如果状态码是0，表示探测成功。所有其他状态码都被认为失败。



### 1.2 创建基于HTTP的存活探针

### 1.3 使用存活探针

### 1.4 配置存活探针的附加属性

### 1.5 创建有效的存活探针


## 2. ReplicationController控制器



## 3. RelicaSet代替ReplicationController



## 4. DaemonSet在每个节点上运行一个pod



## 5. 运行执行单个任务的pod



## 6. 安排Job定期运行或在将来运行一次