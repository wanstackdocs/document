[toc]

# 1. pod: 运行于kubernetes中的容器

内容概要:
1. 创建、启动和停止pod
2. 使用标签组织pod和其他资源
3. 使用特定标签对所有pod执行操作
4. 使用命名空间将多个pod分到不重叠的组中
5. 调度pod到指定类型的工作节点

## 1.1 pod
pod是k8s基本构建模块，一个pod可以包含多个容器，其中每个容器仅运行一个应用进程。

由于不能将多个进程聚集在一个单独的容器中，我们需要另 一种更高级的结构来将容器绑定在一起，并将它们作为一个单元进行管理，这就是 pod 背后的根本原理。

1. 同一个pod中容器之间的部分隔离
k8s通过配置docker来让同一个pod内的所有容器共享相同的namespace，共享相同的主机名、网络接口、IPC(Inter-Process Communication，进程间通信)。新版本k8s和docker中，也可以共享PID，但是该特征未激活。

>注意:当同一个 pod 中的容器使用单独的 PID 命名空间时，在容器中执行 psaux 就只会看到容器自己的进程

由于一个pod 中的容器运行于相同的 Network 命名空间中，因此它们共享相同的 IP 地址和端口空间。 这意味着在同一 pod 中的容器运行的多个进程需要注意不能绑定到相同的端口号， 否则会导致端口冲突， 但这只涉及同-pod 中的容器。 由千每个 pod 都有独立的端口空间， 对于不同 pod 中的容器来说则永远不会遇到端口冲突。 此外， 一个 pod 中的所有容器也都具有相同的 loopback网络接口，因此容器可以通过 localhost 与同一 pod 中的其他容器进行通信。

2. 通过pod合理管理容器
一个pod只能运行在一个工作节点上。
举例： 前端和后端是否应该运行在同一个pod？不应该
>1. 充分利用多个工作节点的CPU，假如只有一个pod，包含2个容器，前端和后端。这样就无法利用多个工作节点的CPU资源。
>2. 基于扩缩容考虑而分割多个pod中，pod是扩缩容基本单位，不能横向扩展pod中的单个容器，只能扩缩容pod。前端和后端扩缩容有不同的需求，所以需要分割成2个pod。

什么情况下可以组合多个容器在一个pod中？
